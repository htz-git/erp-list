# 接口测试示例

## 一、用户服务接口测试

### 1. 创建用户
```bash
curl -X POST http://localhost:8080/api/users \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "password": "123456",
    "realName": "测试用户",
    "phone": "13800138000",
    "email": "test@example.com"
  }'
```

### 2. 查询用户列表
```bash
curl -X GET "http://localhost:8080/api/users?pageNum=1&pageSize=10"
```

### 3. 根据ID查询用户
```bash
curl -X GET http://localhost:8080/api/users/1
```

### 4. 更新用户
```bash
curl -X PUT http://localhost:8080/api/users/1 \
  -H "Content-Type: application/json" \
  -d '{
    "realName": "更新后的姓名",
    "phone": "13900139000",
    "email": "updated@example.com"
  }'
```

### 5. 启用/禁用用户
```bash
curl -X PUT "http://localhost:8080/api/users/1/status?status=0"
```

## 二、订单服务接口测试

### 1. 创建订单
```bash
curl -X POST http://localhost:8080/api/orders \
  -H "Content-Type: application/json" \
  -d '{
    "userId": 1,
    "items": [
      {
        "productId": 1001,
        "productName": "测试商品1",
        "price": 99.00,
        "quantity": 2
      },
      {
        "productId": 1002,
        "productName": "测试商品2",
        "price": 199.00,
        "quantity": 1
      }
    ],
    "discountAmount": 10.00,
    "receiverName": "张三",
    "receiverPhone": "13800138000",
    "receiverAddress": "北京市朝阳区xxx街道xxx号"
  }'
```

### 2. 查询订单列表
```bash
curl -X GET "http://localhost:8080/api/orders?userId=1&pageNum=1&pageSize=10"
```

### 3. 根据ID查询订单
```bash
curl -X GET http://localhost:8080/api/orders/1
```

### 4. 根据订单号查询订单
```bash
curl -X GET http://localhost:8080/api/orders/orderNo/ORD1234567890
```

### 5. 更新订单状态（发货）
```bash
curl -X PUT "http://localhost:8080/api/orders/1/status?status=2"
```

### 6. 更新支付状态
```bash
curl -X PUT "http://localhost:8080/api/orders/1/payStatus?payStatus=1"
```

### 7. 取消订单
```bash
curl -X PUT http://localhost:8080/api/orders/1/cancel
```

### 8. 查询订单明细
```bash
curl -X GET http://localhost:8080/api/order-items/order/1
```

## 三、使用Postman测试

### 导入Postman Collection

1. 打开Postman
2. 创建新的Collection：ERP跨境电商管理系统
3. 按照上述curl命令创建请求

### 环境变量设置

创建环境变量：
- `base_url`: http://localhost:8080
- `gateway_url`: http://localhost:8080
- `user_service_url`: http://localhost:8081
- `order_service_url`: http://localhost:8082

## 四、接口响应示例

### 成功响应
```json
{
  "code": 200,
  "message": "操作成功",
  "data": {
    "id": 1,
    "orderNo": "ORD1234567890",
    "userId": 1,
    "totalAmount": 397.00,
    "payAmount": 387.00,
    "orderStatus": 0,
    "payStatus": 0
  }
}
```

### 错误响应
```json
{
  "code": 500,
  "message": "订单不存在",
  "data": null
}
```

## 五、测试流程建议

1. **先创建用户**
   - 创建测试用户
   - 记录返回的用户ID

2. **创建订单**
   - 使用创建的用户ID创建订单
   - 记录返回的订单号和订单ID

3. **查询订单**
   - 使用订单ID或订单号查询订单详情
   - 查询订单明细

4. **更新订单状态**
   - 更新支付状态
   - 更新订单状态（发货、完成等）

5. **查询订单列表**
   - 测试分页查询
   - 测试条件筛选

